var rankscience_loaded=!1;!function(){var script_version=41,script_last_update="2020-9-9 14:38:20",use_query_params=0,enhancements=[{filter:{active:1,enhancement_id:4057,id:4068,name:"",type:"prefix",value:"/fotos/"},id:4057,name:"Fotos (ES) - Freepik",recipes:[{active:1,enhancement_id:4057,id:5131,instructions:[],name:"Control",position:0,weight:1},{active:1,enhancement_id:4057,id:5132,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T06:51:55.000Z",id:13219,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5132,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( 'Fotos de {{photo_title}}, {{recursos}} Fotos de stock gratuitas de gran calidad' ) = {{original title}}",created_at:"2020-08-06T06:51:55.000Z",id:13220,ins_value:null,method:"",name:"",pattern:"Fotos de {{photo_title}}, {{recursos}} Fotos de stock gratuitas de gran calidad",position:1,recipe_id:5132,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{photo_title_1}} = set( 'Fotos de {{photo_title}} | Descarga gratis' )",created_at:"2020-08-06T06:51:55.000Z",id:13221,ins_value:null,method:"",name:"",pattern:"Fotos de {{photo_title}} | Descarga gratis",position:2,recipe_id:5132,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"",workspace_output_key:"photo_title_1"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{photo_title_1}}",created_at:"2020-08-06T06:51:55.000Z",id:13222,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5132,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"photo_title_1",workspace_output_key:""}],name:"Recipe A",position:1,weight:1},{active:1,enhancement_id:4057,id:5134,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T06:51:55.000Z",id:13227,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5134,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( 'Fotos de {{photo_title}}, {{recursos}} Fotos de stock gratuitas de gran calidad' ) = {{original title}}",created_at:"2020-08-06T06:51:55.000Z",id:13228,ins_value:null,method:"",name:"",pattern:"Fotos de {{photo_title}}, {{recursos}} Fotos de stock gratuitas de gran calidad",position:1,recipe_id:5134,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{recursos}} = innertext( header.tabs-results.collections.search-filter label )",created_at:"2020-08-06T06:51:55.000Z",id:13229,ins_value:null,method:"Inner Text",name:"",pattern:"",position:2,recipe_id:5134,selector:"header.tabs-results.collections.search-filter label",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"",workspace_output_key:"recursos"},{active:1,attr_key:"",attribute_key:null,code:"extract( '{{can_recursos}} Recursos' ) = {{recursos}}",created_at:"2020-08-06T06:51:55.000Z",id:13230,ins_value:null,method:"",name:"",pattern:"{{can_recursos}} Recursos",position:3,recipe_id:5134,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"recursos",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{tag_title_3}} = set( '{{can_recursos}} fotos de {{photo_title}} | Descarga Gratis' )",created_at:"2020-08-06T06:51:55.000Z",id:13231,ins_value:null,method:"",name:"",pattern:"{{can_recursos}} fotos de {{photo_title}} | Descarga Gratis",position:4,recipe_id:5134,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"",workspace_output_key:"tag_title_3"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{tag_title_3}}",created_at:"2020-08-06T06:51:55.000Z",id:13232,ins_value:null,method:"Inner Text",name:"",pattern:"",position:5,recipe_id:5134,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"tag_title_3",workspace_output_key:""}],name:"Recipe B",position:2,weight:1},{active:1,enhancement_id:4057,id:5136,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-06T06:58:39.000Z",id:13239,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5136,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( 'Fotos de {{photo_title}}, {{recursos}} Fotos de stock gratuitas de gran calidad' ) = {{original title}}",created_at:"2020-08-06T06:58:39.000Z",id:13240,ins_value:null,method:"",name:"",pattern:"Fotos de {{photo_title}}, {{recursos}} Fotos de stock gratuitas de gran calidad",position:1,recipe_id:5136,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{photo_title_2}} = set( 'Las fotos de {{photo_title}} más descargadas en agosto | Freepik' )",created_at:"2020-08-06T06:58:39.000Z",id:13241,ins_value:null,method:"",name:"",pattern:"Las fotos de {{photo_title}} más descargadas en agosto | Freepik",position:2,recipe_id:5136,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"",workspace_output_key:"photo_title_2"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{photo_title_2}}",created_at:"2020-08-06T06:58:39.000Z",id:13242,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5136,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-19T03:31:21.000Z",value:"",workspace_input_key:"photo_title_2",workspace_output_key:""}],name:"Recipe C",position:3,weight:1}],site_id:599,status:"Inactive"},{filter:{active:1,enhancement_id:4062,id:4073,name:"",type:"prefix",value:"/fotos-vectores-gratis/"},id:4062,name:"Tag (ES) - Freepik",recipes:[{active:1,enhancement_id:4062,id:5160,instructions:[],name:"Control",position:0,weight:1},{active:1,enhancement_id:4062,id:5161,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-10T00:57:29.000Z",id:13336,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5161,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( 'Imágenes de {{tag}} | Vectores, fotos de stock y PSD gratuitos' ) = {{original title}}",created_at:"2020-08-10T00:57:29.000Z",id:13337,ins_value:null,method:"",name:"",pattern:"Imágenes de {{tag}} | Vectores, fotos de stock y PSD gratuitos",position:1,recipe_id:5161,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{tag_title_1}} = set( 'Imágenes gratis de {{tag}} | Freepik' )",created_at:"2020-08-10T00:57:29.000Z",id:13338,ins_value:null,method:"",name:"",pattern:"Imágenes gratis de {{tag}} | Freepik",position:2,recipe_id:5161,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"",workspace_output_key:"tag_title_1"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{tag_title_1}}",created_at:"2020-08-10T00:57:29.000Z",id:13339,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5161,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"tag_title_1",workspace_output_key:""}],name:"Recipe A",position:1,weight:1},{active:1,enhancement_id:4062,id:5162,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-10T00:57:29.000Z",id:13340,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5162,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( 'Imágenes de {{tag}} | Vectores, fotos de stock y PSD gratuitos' ) = {{original title}}",created_at:"2020-08-10T00:57:29.000Z",id:13341,ins_value:null,method:"",name:"",pattern:"Imágenes de {{tag}} | Vectores, fotos de stock y PSD gratuitos",position:1,recipe_id:5162,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{tag_title_2}} = set( 'Las imágenes de {{tag}} más descargadas de Agosto' )",created_at:"2020-08-10T00:57:29.000Z",id:13342,ins_value:null,method:"",name:"",pattern:"Las imágenes de {{tag}} más descargadas de Agosto",position:2,recipe_id:5162,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"",workspace_output_key:"tag_title_2"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{tag_title_2}}",created_at:"2020-08-10T00:57:29.000Z",id:13343,ins_value:null,method:"Inner Text",name:"",pattern:"",position:3,recipe_id:5162,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"tag_title_2",workspace_output_key:""}],name:"Recipe B",position:2,weight:1},{active:1,enhancement_id:4062,id:5163,instructions:[{active:1,attr_key:"",attribute_key:null,code:"{{original title}} = innertext( title )",created_at:"2020-08-10T00:57:29.000Z",id:13344,ins_value:null,method:"Inner Text",name:"",pattern:"",position:0,recipe_id:5163,selector:"title",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"",workspace_output_key:"original title"},{active:1,attr_key:"",attribute_key:null,code:"extract( 'Imágenes de {{tag}} | Vectores, fotos de stock y PSD gratuitos' ) = {{original title}}",created_at:"2020-08-10T00:57:29.000Z",id:13345,ins_value:null,method:"",name:"",pattern:"Imágenes de {{tag}} | Vectores, fotos de stock y PSD gratuitos",position:1,recipe_id:5163,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"original title",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{recursos}} = innertext( header.tabs-results.collections.search-filter label )",created_at:"2020-08-10T00:57:29.000Z",id:13346,ins_value:null,method:"Inner Text",name:"",pattern:"",position:2,recipe_id:5163,selector:"header.tabs-results.collections.search-filter label",type:"take-dom--passthru--put-workspace",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"",workspace_output_key:"recursos"},{active:1,attr_key:"",attribute_key:null,code:"extract( '{{can_recursos}} Recursos' ) = {{recursos}}",created_at:"2020-08-10T00:57:29.000Z",id:13347,ins_value:null,method:"",name:"",pattern:"{{can_recursos}} Recursos",position:3,recipe_id:5163,selector:"",type:"take-workspace--extract-with-pattern--put-workspace",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"recursos",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{tag_title_3}} = set( '{{can_recursos}} imágenes de {{tag}} | Descarga Gratis' )",created_at:"2020-08-10T00:57:29.000Z",id:13348,ins_value:null,method:"",name:"",pattern:"{{can_recursos}} imágenes de {{tag}} | Descarga Gratis",position:4,recipe_id:5163,selector:"",type:"take-workspace--set-with-pattern--put-workspace",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"",workspace_output_key:"tag_title_3"},{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{tag_title_3}}",created_at:"2020-08-10T00:57:29.000Z",id:13349,ins_value:null,method:"Inner Text",name:"",pattern:"",position:5,recipe_id:5163,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-08-19T03:32:42.000Z",value:"",workspace_input_key:"tag_title_3",workspace_output_key:""}],name:"Recipe C",position:3,weight:1}],site_id:599,status:"Inactive"},{filter:{active:1,enhancement_id:4097,id:4108,name:"",type:"prefix",value:"/vector-gratis/"},id:4097,name:"test",recipes:[{active:1,enhancement_id:4097,id:5248,instructions:[],name:"Control",position:0,weight:1},{active:1,enhancement_id:4097,id:5249,instructions:[{active:1,attr_key:"",attribute_key:null,code:"innertext( title ) = {{related_tag_2}}",created_at:"2020-09-03T03:35:47.000Z",id:13603,ins_value:null,method:"Inner Text",name:"",pattern:"",position:1,recipe_id:5249,selector:"title",type:"take-workspace--passthru--put-dom",updated_at:"2020-09-03T03:41:50.000Z",value:"",workspace_input_key:"related_tag_2",workspace_output_key:""},{active:1,attr_key:"",attribute_key:null,code:"{{related_tag_2}} = outerhtml( .detail__keywords li:nth-child(2) )",created_at:"2020-09-03T03:39:05.000Z",id:13604,ins_value:null,method:"Outer HTML",name:"",pattern:"",position:0,recipe_id:5249,selector:".detail__keywords li:nth-child(2)",type:"take-dom--passthru--put-workspace",updated_at:"2020-09-03T03:41:50.000Z",value:"",workspace_input_key:"",workspace_output_key:"related_tag_2"}],name:"Recipe A",position:1,weight:1}],site_id:599,status:"Inactive"}];function paint(middleware,enhancements){function isValidEnhancement(e){const t=e.getCurrentPath(),a=e.getRsParams();function n(n){if(!t){e.logError("CurrentPath is not set","rs-path-empty");return!1}if(a["rs-deactivate"]&&"all"==a["rs-deactivate"]){const t="All enhancements were disabled with ?rs-deactivate=all";e.logError(t,"rs-deactivate");return!1}if("Active"!==n.status&&!a["rs-test"]&&!a["rs-recipe"]){a["rs-verbose"]&&"true"==a["rs-verbose"]&&e.logError("Skipping inactive enhancement "+n.id,"rs-skip "+n.id);return!1}var i=n.filter;switch(i.type){case"exact_match":return t===i.value;case"prefix":return t.substr(0,i.value.length)===i.value;case"list":return i.value.split("|").indexOf(t)>=0;case"regex":var o=!0;try{new RegExp(String(i.value))}catch(t){e.logError(t.toString(),"rs-test bad regex");o=!1}if(!o)return!1;try{r=new RegExp(String(i.value));return t.match(r)}catch(t){e.logError(t.toString(),"rs-test bad regex");return!1}default:return!1}}return a["rs-test"]?function(t){if(Number(t.id)===Number(a["rs-test"])&&n(t)){e.logError("Enhancement with id "+String(t.id)+" currently being tested with `?rs-test`.","announce rs-test");return!0}return!1}:a["rs-recipe"]?function(t){var r=!1;t.recipes&&t.recipes.length>0&&t.recipes.forEach(function(e){Number(e.id)===Number(a["rs-recipe"])&&(r=!0)});if(r&&n(t)){e.logError("Recipe with id "+a["rs-recipe"]+" currently being tested with `?rs-recipe`.","announce rs-recipe");return!0}return!1}:n}function chooseInstructionSequence(e){return function(t){return e.chooseInstructionSequence(t,e.getCurrentPath())}}function getWorkspaceInputKey(ws,key){var name=key,toWrite=ws[key];if(!toWrite){var func=!1,arr=name.split("."),len=arr.length;if(!(len>1))throw"RS-MissingWorkspaceItemError: no item named `"+key+"` in workspace.";name=arr[0];func=arr.slice(1,len).join(".");if(func){toWrite=ws[name];if(!toWrite)throw"RS-MissingWorkspaceItemError: no item named `"+name+"` in workspace.";try{toWrite=eval("toWrite."+func)}catch(e){throw"RS-UnknownWorkspaceFunctionError: "+e.message}}}return toWrite}function setWorkspaceOutputKey(e,t,r){if(!t)throw"RS-MissingWorkspaceItemError: no workspace item defined.";e[t]=r}function chooseInstructionExecutor(e){switch(e.type){case"take-constant--passthru--put-dom":return function(e,t,r){e.setHtml(r,r.value);return t};case"take-workspace--passthru--put-dom":return function(e,t,r){var a=getWorkspaceInputKey(t,r.workspace_input_key);e.setHtml(r,a);return t};case"take-dom--passthru--put-workspace":return function(e,t,r){var a=e.getHtml(r);setWorkspaceOutputKey(t,r.workspace_output_key,a);return t};case"take-workspace--extract-with-pattern--put-workspace":return function(e,t,r){var a=getWorkspaceInputKey(t,r.workspace_input_key),n=r.pattern.replace(/{{/g,"e0cd4aa7d36323291836aed2ba1a2f35").replace(/}}/g,"67c0904ef67556c8b54cfb9c83f28bea").replace(/<OR>/g,"b55206ef52e0848c6f2dc05665617216").replace(/[-^[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace(/e0cd4aa7d36323291836aed2ba1a2f35/g,"{{").replace(/67c0904ef67556c8b54cfb9c83f28bea/g,"}}").replace(/b55206ef52e0848c6f2dc05665617216/g,"|").replace(/{{.+?}}/g,"([\\s\\S]+)").replace(/\\ /g,"\\s+"),i=a.match(n);if(!i)throw"RS-WorkspaceExtractPatternError: pattern `"+r.pattern+"` does not match workspace item `"+r.workspace_input_key+"` with value `"+a+"`.";var o=r.pattern.match(/{{.+?}}/g);o&&o.length>0&&o.forEach(function(e,r){var a=e.slice(2,e.length-2).trim();void 0===i[r+1]?setWorkspaceOutputKey(t,a,""):setWorkspaceOutputKey(t,a,i[r+1])});return t};case"take-workspace--set-with-pattern--put-workspace":return function(e,t,r){var a=r.pattern.match(/{{.+?}}/g);if(a&&a.length>0){a.forEach(function(e){var a=e.slice(2,e.length-2).trim();a.indexOf("?")>0&&(a=a.split("?")[0]);try{getWorkspaceInputKey(t,a)}catch(e){if(void 0===t[a])throw e+" substituting in pattern `"+r.pattern}});var n=a.reduce(function(e,r){var a,n=r.slice(2,r.length-2).trim();if(n.indexOf("?")>0){let e=n.split("?");a=(a=getWorkspaceInputKey(t,e[0]))?e[1]:""}else a=getWorkspaceInputKey(t,n);return e.replace(r,a)},r.pattern);setWorkspaceOutputKey(t,r.workspace_output_key,n)}else setWorkspaceOutputKey(t,r.workspace_output_key,r.pattern);return t};case"take-workspace--set-with-pattern--put-schema":return function(e,t,r){var a=r.pattern.match(/{{.+?}}/g);if(a&&a.length>0){a.forEach(function(e){var a=e.slice(2,e.length-2).trim();a.indexOf("?")>0&&(a=a.split("?")[0]);try{getWorkspaceInputKey(t,a)}catch(e){if(void 0===t[a])throw e+" substituting in pattern `"+r.pattern}});var n=a.reduce(function(e,r){var a,n=r.slice(2,r.length-2).trim();if(n.indexOf("?")>0){let e=n.split("?");a=(a=getWorkspaceInputKey(t,e[0]))?e[1]:""}else a=getWorkspaceInputKey(t,n);return e.replace(r,a)},r.pattern)}else n=r.pattern;let i=document.createElement("script");i.type="application/ld+json";i.text=n;document.querySelector("head").appendChild(i);return t};case"take-workspace--titlecase--put-workspace":return function(e,t,r){var a=getWorkspaceInputKey(t,r.workspace_input_key).split(" ").map(function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}).join(" ");setWorkspaceOutputKey(t,r.workspace_output_key,a);return t};case"take-dom--prepend-with-workspace--put-dom":return function(e,t,r){var a=e.getHtml(r),n=getWorkspaceInputKey(t,r.workspace_input_key)+a;e.setHtml(r,n);return t};case"take-dom--append-with-workspace--put-dom":return function(e,t,r){var a=e.getHtml(r)+getWorkspaceInputKey(t,r.workspace_input_key);e.setHtml(r,a);return t};default:throw"RS-UnknownInstructionType: received unknown instruction type `"+e.type+"`."}}function runInstruction(e,t){const r=e.getRsParams();return function(a){r["rs-verbose"]&&"true"==r["rs-verbose"]&&e.logError("Running instruction "+(a.position+1)+" "+a.code);var n=chooseInstructionExecutor(a)(e,t,a);t=n}}function runInstructionSequence(e){return function(t){try{if(t&&t.length>0){t.sort(function(e,t){return e.position-t.position});t.forEach(runInstruction(e,{}))}}catch(t){e.logError(t,t)}}}var validEnhancements=enhancements.filter(isValidEnhancement(middleware)),rsTest=middleware.getRsParams()["rs-test"],userInputtedBadId=0==validEnhancements.length&&rsTest;if(userInputtedBadId){var testEnhancements=enhancements.filter(function(e){return Number(e.id)===Number(rsTest)}),realEnhancementButWrongPath=testEnhancements.length>0;if(realEnhancementButWrongPath){var e=testEnhancements[0];middleware.logError("RS-Error: Enhancement with id "+rsTest+" isn't configured to run on this page. If this is not correct behavior, double check your enhancement's filter.","rs-test picked wrong id");middleware.logError("Filter type:  "+e.filter.type,"rs-test bad filter type");middleware.logError("Filter value: "+e.filter.value,"rs-test bad filter value");middleware.logError("Current path: "+middleware.getCurrentPath(),"rs-test bad filter curr path")}else middleware.logError("RS-Error: An enhancement with id `"+rsTest+"` does not exist. Double check the id in your rs=test=<id> request.","bad user input for rs-test")}try{var chosenInstructionSequences=validEnhancements.map(chooseInstructionSequence(middleware));chosenInstructionSequences.forEach(runInstructionSequence(middleware))}catch(e){middleware.logError(e,e)}}function makeMiddleware(){function e(){var e=window.location.pathname,t="",r=!1;if(window.location.search){var a=window.location.search.slice(1);try{a=decodeURI(window.location.search.slice(1))}catch(e){a=window.location.search.slice(1)}for(var n,i=a.split("&"),s=[];n=i.shift();)if(0!==n.indexOf("rs-"))s.push(n);else if("rs-verbose"==n){r=!0;o("RankScience Script Version: "+script_version+" "+script_last_update,"rs-version")}s.length>0&&(t="?"+s.join("&"))}try{e=use_query_params?decodeURIComponent(window.location.pathname)+t:decodeURIComponent(window.location.pathname)}catch(a){e=use_query_params?window.location.pathname+t:window.location.pathname;r&&o("RS Error decoding URI: "+e,"rs-pathname")}r&&o("RS pathname URI: "+e,"rs-pathname");return e}function t(){if(!window.location.search)return{};var e="";try{e=decodeURI(window.location.search.slice(1))}catch(t){e=window.location.search.slice(1)}for(var t,r=e.split("&"),a=[];t=r.shift();)if(0===t.indexOf("rs-")){var n=t.split("=");2==n.length?a[n[0]]=n[1]:a[n[0]]="true"}return a}var r={};var a,n=(a=[],{register:function(e){a.indexOf(e)>-1||a.push(e)},shouldRepaint:function(e){var t=a.indexOf(e.target);if(t>-1){a.splice(t,1);return!1}var r=Array.prototype.slice.call(e.removedNodes).filter(function(e){return a.indexOf(e)>-1});if(r.length>0){r.forEach(function(e){var t=a.indexOf(e);a.splice(t,1)});return!1}return!0}});var i=[];function o(e,r){const a=t();if(a["rs-verbose"]&&"true"==a["rs-verbose"]||a["rs-test"]||a["rs-deactivate"]||a["rs-recipe"]){if(r&&i.indexOf(r)>-1)return;i.push(r);console.log(e)}}return{getCurrentPath:window.__rsOverrides__&&window.__rsOverrides__.getPath?window.__rsOverrides__.getPath:e,chooseInstructionSequence:function(e,r){const a=t();if(a["rs-recipe"]){const t=a["rs-recipe"],r=e.recipes.map(function(e){return e.id.toString()});if(-1===r.indexOf(t))throw"RS-Error: Recipe with id `"+t+"` does not exist. Double check the id in your rs=recipe=<id> request.";a["rs-verbose"]&&o(e.recipes[r.indexOf(t)].name+" from enhancement "+e.id+" currently being executed",e.id+" match recipe");return e.recipes[r.indexOf(t)].instructions}var n=getAssignment(e.id,e.recipes,r);a["rs-verbose"]&&o(e.recipes[n].name+" from enhancement "+e.id+" currently being executed",e.id+" match recipe");return e.recipes[n].instructions},setHtml:function(e,t){var r=e.selector.split("<OR>"),a=null;for(index in r)if(a=document.querySelector(r[index]))break;if(null===a)throw"RS-MissingHtmlElementError: can't find element with selector `"+e.selector+"`.";function i(e,t){o("Value before enhancement: "+e,"rs-test before");o("Value after enhancement:  "+t,"rs-test after")}n.register(a);switch(e.method){case"Inner Text":i(a.textContent,t);return a.textContent=t;case"Outer HTML":i(a.outerHTML,t);return a.outerHTML=t;case"Attribute":if(!e.attr_key)throw"RS-MissingAttributeKeyError: A `method` of `Attribute` requires an `attr_key`.";i(a.getAttribute(e.attr_key),t);return a.setAttribute(e.attr_key,t);default:throw"RS-UnknownSetMethod: method `"+e.method+"` not recognized."}},getHtml:function(t){var a=t.selector.split("<OR>"),n=null;for(index in a)if(n=document.querySelector(a[index]))break;if(null===n)throw"RS-MissingHtmlElementError: can't find element with selector `"+t.selector+"`.";var i=e()+":"+t.selector+":"+t.method+":"+t.attr_key;if(r[i])return r[i];switch(t.method){case"Inner Text":r[i]=n.textContent;return n.textContent;case"Outer HTML":r[i]=n.outerHTML;return n.outerHTML;case"Attribute":if(!t.attr_key)throw"RS-MissingAttributeKeyError: A `method` of `Attribute` requires an `attr_key`.";var o=n.getAttribute(t.attr_key);if(o){r[i]=o;return o}throw"RS-MissingAttributeError: Can't find attribute `"+t.attr_key+"` on element with selector `"+t.selector+"`.";default:throw"RS-UnknownExtractionMethod: method `"+t.method+"` not recognized."}},registerPainter:function(e){var t,r=(t=e,function(){if(void 0!==this.alreadyReceivedPaintRequest){this.alreadyReceivedPaintRequest=!0;requestAnimationFrame(function(){t()})}});new MutationObserver(function(e){e.forEach(function(e){n.shouldRepaint(e)&&r()})}).observe(document,{childList:!0,subtree:!0,attributes:!0})},logError:o,getRsParams:t}}function getAssignment(e,t,r){function a(e,t){var r=e[0],a=e[1],n=e[2],u=e[3];a=c(a=c(a=c(a=c(a=s(a=s(a=s(a=s(a=o(a=o(a=o(a=o(a=i(a=i(a=i(a=i(a,n=i(n,u=i(u,r=i(r,a,n,u,t[0],7,-680876936),a,n,t[1],12,-389564586),r,a,t[2],17,606105819),u,r,t[3],22,-1044525330),n=i(n,u=i(u,r=i(r,a,n,u,t[4],7,-176418897),a,n,t[5],12,1200080426),r,a,t[6],17,-1473231341),u,r,t[7],22,-45705983),n=i(n,u=i(u,r=i(r,a,n,u,t[8],7,1770035416),a,n,t[9],12,-1958414417),r,a,t[10],17,-42063),u,r,t[11],22,-1990404162),n=i(n,u=i(u,r=i(r,a,n,u,t[12],7,1804603682),a,n,t[13],12,-40341101),r,a,t[14],17,-1502002290),u,r,t[15],22,1236535329),n=o(n,u=o(u,r=o(r,a,n,u,t[1],5,-165796510),a,n,t[6],9,-1069501632),r,a,t[11],14,643717713),u,r,t[0],20,-373897302),n=o(n,u=o(u,r=o(r,a,n,u,t[5],5,-701558691),a,n,t[10],9,38016083),r,a,t[15],14,-660478335),u,r,t[4],20,-405537848),n=o(n,u=o(u,r=o(r,a,n,u,t[9],5,568446438),a,n,t[14],9,-1019803690),r,a,t[3],14,-187363961),u,r,t[8],20,1163531501),n=o(n,u=o(u,r=o(r,a,n,u,t[13],5,-1444681467),a,n,t[2],9,-51403784),r,a,t[7],14,1735328473),u,r,t[12],20,-1926607734),n=s(n,u=s(u,r=s(r,a,n,u,t[5],4,-378558),a,n,t[8],11,-2022574463),r,a,t[11],16,1839030562),u,r,t[14],23,-35309556),n=s(n,u=s(u,r=s(r,a,n,u,t[1],4,-1530992060),a,n,t[4],11,1272893353),r,a,t[7],16,-155497632),u,r,t[10],23,-1094730640),n=s(n,u=s(u,r=s(r,a,n,u,t[13],4,681279174),a,n,t[0],11,-358537222),r,a,t[3],16,-722521979),u,r,t[6],23,76029189),n=s(n,u=s(u,r=s(r,a,n,u,t[9],4,-640364487),a,n,t[12],11,-421815835),r,a,t[15],16,530742520),u,r,t[2],23,-995338651),n=c(n,u=c(u,r=c(r,a,n,u,t[0],6,-198630844),a,n,t[7],10,1126891415),r,a,t[14],15,-1416354905),u,r,t[5],21,-57434055),n=c(n,u=c(u,r=c(r,a,n,u,t[12],6,1700485571),a,n,t[3],10,-1894986606),r,a,t[10],15,-1051523),u,r,t[1],21,-2054922799),n=c(n,u=c(u,r=c(r,a,n,u,t[8],6,1873313359),a,n,t[15],10,-30611744),r,a,t[6],15,-1560198380),u,r,t[13],21,1309151649),n=c(n,u=c(u,r=c(r,a,n,u,t[4],6,-145523070),a,n,t[11],10,-1120210379),r,a,t[2],15,718787259),u,r,t[9],21,-343485551);e[0]=_(r,e[0]);e[1]=_(a,e[1]);e[2]=_(n,e[2]);e[3]=_(u,e[3])}function n(e,t,r,a,n,i){t=_(_(t,e),_(a,i));return _(t<<n|t>>>32-n,r)}function i(e,t,r,a,i,o,s){return n(t&r|~t&a,e,t,i,o,s)}function o(e,t,r,a,i,o,s){return n(t&a|r&~a,e,t,i,o,s)}function s(e,t,r,a,i,o,s){return n(t^r^a,e,t,i,o,s)}function c(e,t,r,a,i,o,s){return n(r^(t|~a),e,t,i,o,s)}function u(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var p="0123456789abcdef".split("");function l(e){for(var t="",r=0;r<4;r++)t+=p[e>>8*r+4&15]+p[e>>8*r&15];return t}function d(e){return function(e){for(var t=0;t<e.length;t++)e[t]=l(e[t]);return e.join("")}(function(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)a(n,u(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);i[t>>2]|=128<<(t%4<<3);if(t>55){a(n,i);for(t=0;t<16;t++)i[t]=0}i[14]=8*r;a(n,i);return n}(e))}function _(e,t){return e+t&4294967295}if("5d41402abc4b2a76b9719d911017c592"!=d("hello"))function _(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}if(1===t.length)return 0;var k=t.reduce(function(e,t){return e+t.weight},0),h=d("enhancement_id="+e+"&path="+r),m=0;m=e<2850?parseInt(h[h.length-1],16)%k:parseInt(h.substr(8,8),16)%k;return t.reduce(function(e,t,r){var a=e.sum+1>m;if(e.done)return e;if(a){e.chosenInstructionIdx=r;e.done=!0}else e.sum=e.sum+t.weight;return e},{sum:0}).chosenInstructionIdx}function logHash(){console.log("RS-Hash:","1ddbbf38e67a7c7c06354176b8fade73")}function initializer(e,t,r){var a,n=e();function i(){t(n,r)}n.registerPainter(i);a=function(){window.location.search.indexOf("rs-hash=true")>-1&&logHash();i()},(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?a():document.addEventListener("DOMContentLoaded",a)}initializer(makeMiddleware,paint,enhancements);rankscience_loaded=!0}();